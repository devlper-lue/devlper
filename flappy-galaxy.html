<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Flappy Galaxy: Asteroids Edition</title>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@600;700&family=Quicksand:wght@400;500&display=swap" rel="stylesheet">
  <style>
    body {
      font-family: 'Quicksand', Arial, sans-serif;
      background: url('https://images.unsplash.com/photo-1462331940025-496dfbfc7564?auto=format&fit=crop&w=1500&q=80') no-repeat center center fixed, #000;
      background-size: cover;
      margin: 0;
      min-height: 100vh;
      color: #e0e6f7;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      position: relative;
      overflow: hidden;
    }
    .star-bg {
      position: fixed;
      top: 0; left: 0; width: 100vw; height: 100vh;
      z-index: 0;
      pointer-events: none;
    }
    .game-container {
      position: relative;
      margin-top: 40px;
      z-index: 1;
      box-shadow: 0 0 32px 8px #3949ab55, 0 0 64px 16px #ffd54f22;
      border-radius: 18px;
      overflow: hidden;
      background: rgba(20, 20, 40, 0.18);
      border: 2.5px solid #90caf9;
      backdrop-filter: blur(8px) saturate(1.2);
    }
    canvas {
      display: block;
      background: transparent;
    }
    .score {
      position: absolute;
      top: 18px;
      left: 50%;
      transform: translateX(-50%);
      font-family: 'Poppins', 'Quicksand', Arial, sans-serif;
      font-size: 2.2rem;
      color: #ffd54f;
      text-shadow: 0 0 16px #90caf9, 0 2px 8px #1a237e;
      letter-spacing: 2px;
      z-index: 2;
      user-select: none;
      pointer-events: none;
    }
    .game-over {
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      font-family: 'Poppins', 'Quicksand', Arial, sans-serif;
      font-size: 2.2rem;
      color: #ffd54f;
      text-shadow: 0 0 24px #90caf9, 0 2px 8px #1a237e;
      background: rgba(20, 20, 40, 0.7);
      border-radius: 16px;
      padding: 1.2rem 2.2rem;
      z-index: 3;
      display: none;
      flex-direction: column;
      align-items: center;
      box-shadow: 0 0 32px #3949ab99;
      border: 2px solid #ffd54f;
      animation: fadein 1s;
    }
    .game-over button {
      margin-top: 1.2rem;
      font-family: 'Poppins', 'Quicksand', Arial, sans-serif;
      background: linear-gradient(90deg, #3949ab 60%, #1a237e 100%);
      color: #fff;
      border: none;
      border-radius: 5px;
      padding: 0.7rem 1.2rem;
      font-size: 1.1rem;
      font-weight: bold;
      cursor: pointer;
      box-shadow: 0 2px 8px #1a237e44, 0 0 8px #ffd54f44;
      transition: background 0.2s, transform 0.2s;
      letter-spacing: 1px;
      outline: none;
      text-shadow: 0 0 8px #ffd54f88;
    }
    .game-over button:hover {
      background: linear-gradient(90deg, #1a237e 60%, #3949ab 100%);
      transform: translateY(-2px) scale(1.03);
      box-shadow: 0 4px 16px #ffd54f44, 0 0 16px #ffd54f99;
    }
    @keyframes fadein {
      from { opacity: 0; }
      to { opacity: 1; }
    }
    .footer {
      margin-top: 2rem;
      color: #b3c6ff;
      font-size: 1rem;
      letter-spacing: 1px;
      z-index: 1;
      text-shadow: 0 1px 4px #1a237e;
      font-family: 'Poppins', 'Segoe Script', cursive, sans-serif;
      text-align: center;
      opacity: 0.85;
    }
  </style>
</head>
<body>
  <canvas id="starfield" class="star-bg"></canvas>
  <div class="game-container" id="game-container">
    <div class="score" id="score">0</div>
    <canvas id="game" width="420" height="600"></canvas>
    <div class="game-over" id="game-over">
      <div id="game-over-text">Game Over</div>
      <div id="final-score"></div>
      <button onclick="restartGame()">Restart</button>
    </div>
  </div>
  <div class="footer">made by lue</div>
  <script>
  // Starfield animation (background)
  const starCanvas = document.getElementById('starfield');
  const starCtx = starCanvas.getContext('2d');
  let stars = [];
  const STAR_COUNT = 400;
  const STAR_COLORS = ['#fff', '#b3c6ff', '#e0e6f7', '#ffd54f'];
  function resizeStarCanvas() {
    starCanvas.width = window.innerWidth;
    starCanvas.height = window.innerHeight;
  }
  function createStars() {
    stars = [];
    for (let i = 0; i < STAR_COUNT; i++) {
      stars.push({
        x: Math.random() * starCanvas.width,
        y: Math.random() * starCanvas.height,
        speed: 0.2 + Math.random() * 0.7,
        o: 0.5 + Math.random() * 0.5,
        r: 0.5 + Math.random() * 1.5,
        color: STAR_COLORS[Math.floor(Math.random() * STAR_COLORS.length)],
        twinkle: Math.random() * Math.PI * 2
      });
    }
  }
  let twinkleTime = 0;
  function drawStars() {
    starCtx.clearRect(0, 0, starCanvas.width, starCanvas.height);
    twinkleTime += 0.03;
    for (let star of stars) {
      let twinkle = 0.7 + 0.3 * Math.sin(twinkleTime + star.twinkle);
      starCtx.globalAlpha = star.o * twinkle;
      starCtx.beginPath();
      starCtx.arc(star.x, star.y, star.r, 0, 2 * Math.PI);
      starCtx.fillStyle = star.color;
      starCtx.shadowColor = star.color;
      starCtx.shadowBlur = 10;
      starCtx.fill();
    }
    starCtx.globalAlpha = 1;
  }
  function animateStars() {
    for (let star of stars) {
      star.y += star.speed;
      star.x += Math.sin(star.y / 80) * 0.2;
      if (star.y > starCanvas.height) {
        star.x = Math.random() * starCanvas.width;
        star.y = 0;
      }
    }
    drawStars();
    requestAnimationFrame(animateStars);
  }
  window.addEventListener('resize', () => {
    resizeStarCanvas();
    createStars();
  });
  resizeStarCanvas();
  createStars();
  animateStars();

  // Flappy Galaxy Game
  const canvas = document.getElementById('game');
  const ctx = canvas.getContext('2d');
  const W = canvas.width;
  const H = canvas.height;

  // Spaceship
  const ship = {
    x: 80,
    y: H / 2,
    w: 44,
    h: 32,
    vy: 0,
    gravity: 0.38,
    lift: -7.5,
    alive: true,
    sprite: null
  };
  // Asteroids
  let asteroids = [];
  const ASTEROID_W = 54;
  const ASTEROID_GAP = 140;
  const ASTEROID_DIST = 220;
  const ASTEROID_SPEED = 2.5;
  // Score
  let score = 0;
  let bestScore = 0;
  // Game state
  let gameOver = false;
  let started = false;

  // Load spaceship sprite (SVG for glow)
  ship.sprite = new window.Image();
  ship.sprite.src =
    'data:image/svg+xml;utf8,<svg width="44" height="32" viewBox="0 0 44 32" xmlns="http://www.w3.org/2000/svg">'
    + '<defs>'
    + '<radialGradient id="glow" cx="50%" cy="50%" r="50%">'
    + '<stop offset="0%" stop-color="#fff" stop-opacity="0.9"/>'
    + '<stop offset="80%" stop-color="#90caf9" stop-opacity="0.7"/>'
    + '<stop offset="100%" stop-color="#3949ab" stop-opacity="0.2"/>'
    + '</radialGradient>'
    + '</defs>'
    + '<ellipse cx="22" cy="16" rx="18" ry="12" fill="url(%23glow)"/>'
    + '<polygon points="22,2 28,16 22,13 16,16" fill="#ffd54f" stroke="#fff" stroke-width="1.5"/>'
    + '<ellipse cx="22" cy="16" rx="10" ry="7" fill="#fff" opacity="0.4"/>'
    + '<ellipse cx="22" cy="22" rx="4" ry="2.5" fill="#00e676" opacity="0.7"/>'
    + '<ellipse cx="22" cy="28" rx="2.5" ry="1.2" fill="#90caf9" opacity="0.5"/>'
    + '<ellipse cx="30" cy="16" rx="2.5" ry="2.5" fill="#ffd54f"/>'
    + '<ellipse cx="14" cy="16" rx="1.5" ry="1.5" fill="#ffd54f"/>'
    + '</svg>';

  // --- Enemy UFO ---
  const ufoImg = new window.Image();
  ufoImg.src =
    'data:image/svg+xml;utf8,<svg width="48" height="24" viewBox="0 0 48 24" xmlns="http://www.w3.org/2000/svg">'
    + '<ellipse cx="24" cy="16" rx="18" ry="6" fill="#b3c6ff" opacity="0.7"/>'
    + '<ellipse cx="24" cy="12" rx="12" ry="7" fill="#90caf9" stroke="#ffd54f" stroke-width="2"/>'
    + '<ellipse cx="24" cy="12" rx="8" ry="4" fill="#fff" opacity="0.5"/>'
    + '<ellipse cx="34" cy="12" rx="2" ry="2" fill="#ffd54f"/>'
    + '<ellipse cx="14" cy="12" rx="1.5" ry="1.5" fill="#ffd54f"/>'
    + '<ellipse cx="24" cy="20" rx="4" ry="1.2" fill="#00e676" opacity="0.5"/>'
    + '</svg>';
  let ufo = { x: -60, y: 60, speed: 2.2, active: false, timer: 0 };
  function spawnUFO() {
    ufo.x = -60;
    ufo.y = 40 + Math.random() * (H - 80);
    ufo.speed = 1.8 + Math.random() * 1.5;
    ufo.active = true;
  }
  function updateUFO() {
    if (!ufo.active) {
      ufo.timer--;
      if (ufo.timer <= 0 && Math.random() < 0.01) {
        spawnUFO();
      }
      return;
    }
    ufo.x += ufo.speed;
    if (ufo.x > W + 60) {
      ufo.active = false;
      ufo.timer = 120 + Math.floor(Math.random() * 200);
    }
  }
  function drawUFO() {
    if (ufo.active) {
      ctx.save();
      ctx.globalAlpha = 0.85;
      ctx.shadowColor = '#ffd54f';
      ctx.shadowBlur = 18;
      ctx.drawImage(ufoImg, ufo.x, ufo.y, 48, 24);
      ctx.restore();
    }
  }

  function resetGame() {
    ship.y = H / 2;
    ship.vy = 0;
    ship.alive = true;
    asteroids = [];
    score = 0;
    gameOver = false;
    started = false;
    document.getElementById('score').textContent = '0';
    document.getElementById('game-over').style.display = 'none';
    spawnAsteroid();
    ufo.active = false;
    ufo.timer = 60 + Math.floor(Math.random() * 120);
    draw();
  }

  function spawnAsteroid() {
    let gapY = 60 + Math.random() * (H - ASTEROID_GAP - 120);
    asteroids.push({
      x: W + 40,
      gapY: gapY,
      passed: false
    });
  }

  function drawAsteroid(x, gapY) {
    // Top asteroid
    drawAsteroidShape(x, gapY - ASTEROID_GAP / 2, true);
    // Bottom asteroid
    drawAsteroidShape(x, gapY + ASTEROID_GAP / 2, false);
  }

  function drawAsteroidShape(x, y, top) {
    ctx.save();
    ctx.translate(x, y);
    // Draw a jagged asteroid shape
    let points = [];
    let radiusX = ASTEROID_W / 2;
    let radiusY = 60;
    let jag = 8 + Math.floor(Math.random() * 4);
    let angleStep = (2 * Math.PI) / jag;
    let baseAngle = Math.random() * Math.PI;
    for (let i = 0; i < jag; i++) {
        let angle = baseAngle + i * angleStep;
        let rX = radiusX * (0.8 + Math.random() * 0.4);
        let rY = radiusY * (0.8 + Math.random() * 0.4);
        points.push({
            x: Math.cos(angle) * rX,
            y: (Math.sin(angle) * rY) + (top ? -H : H)
        });
    }
    ctx.beginPath();
    ctx.moveTo(points[0].x, points[0].y);
    for (let p of points) ctx.lineTo(p.x, p.y);
    ctx.closePath();
    let grad = ctx.createRadialGradient(0, (top ? -H : H), 10, 0, (top ? -H : H), radiusY);
    grad.addColorStop(0, top ? '#b3c6ff' : '#ffd54f');
    grad.addColorStop(0.7, top ? '#3949ab' : '#bfae5a');
    grad.addColorStop(1, 'rgba(20,20,40,0.7)');
    ctx.fillStyle = grad;
    ctx.shadowColor = top ? '#90caf9' : '#ffd54f';
    ctx.shadowBlur = 32;
    ctx.fill();
    // Add glowing craters
    for (let i = 0; i < 3; i++) {
        let cx = (Math.random() - 0.5) * radiusX * 1.2;
        let cy = (Math.random() - 0.5) * radiusY * 1.2 + (top ? -H : H);
        ctx.beginPath();
        ctx.arc(cx, cy, 4 + Math.random() * 5, 0, 2 * Math.PI);
        ctx.fillStyle = top ? 'rgba(144,202,249,0.25)' : 'rgba(255,213,79,0.18)';
        ctx.shadowColor = top ? '#90caf9' : '#ffd54f';
        ctx.shadowBlur = 12;
        ctx.fill();
    }
    ctx.restore();
}

  function drawShip() {
    ctx.save();
    ctx.shadowColor = '#ffd54f';
    ctx.shadowBlur = 18;
    ctx.drawImage(ship.sprite, ship.x, ship.y, ship.w, ship.h);
    ctx.restore();
  }

  function draw() {
    ctx.clearRect(0, 0, W, H);
    // Draw asteroids
    for (let ast of asteroids) {
      drawAsteroid(ast.x, ast.gapY);
    }
    // Draw UFO (background)
    drawUFO();
    // Draw ship
    drawShip();
  }

  function update() {
    if (!ship.alive) return;
    ship.vy += ship.gravity;
    ship.y += ship.vy;
    // Asteroids
    for (let ast of asteroids) {
      ast.x -= ASTEROID_SPEED;
    }
    // Remove off-screen asteroids
    if (asteroids.length && asteroids[0].x < -ASTEROID_W) {
      asteroids.shift();
    }
    // Spawn new asteroids
    if (asteroids.length === 0 || asteroids[asteroids.length - 1].x < W - ASTEROID_DIST) {
      spawnAsteroid();
    }
    // Update UFO
    updateUFO();
    // Collision
    for (let ast of asteroids) {
      if (
        ship.x + ship.w > ast.x &&
        ship.x < ast.x + ASTEROID_W &&
        (ship.y < ast.gapY - ASTEROID_GAP / 2 || ship.y + ship.h > ast.gapY + ASTEROID_GAP / 2)
      ) {
        ship.alive = false;
        gameOver = true;
        showGameOver();
      }
      // Score
      if (!ast.passed && ast.x + ASTEROID_W < ship.x) {
        score++;
        ast.passed = true;
        document.getElementById('score').textContent = score;
      }
    }
    // Out of bounds
    if (ship.y < 0 || ship.y + ship.h > H) {
      ship.alive = false;
      gameOver = true;
      showGameOver();
    }
    draw();
    if (ship.alive) requestAnimationFrame(update);
  }

  function showGameOver() {
    document.getElementById('game-over').style.display = 'flex';
    document.getElementById('final-score').textContent = `Score: ${score}`;
  }

  function flap() {
    if (!ship.alive) return;
    ship.vy = ship.lift;
    started = true;
  }

  // Controls
  document.addEventListener('keydown', (e) => {
    if (e.code === 'Space') {
      if (!started && !gameOver) {
        started = true;
        update();
      }
      flap();
      e.preventDefault();
    }
    if (e.code === 'Enter' && gameOver) {
      restartGame();
    }
  });
  document.getElementById('game').addEventListener('mousedown', () => {
    if (!started && !gameOver) {
      started = true;
      update();
    }
    flap();
  });
  function restartGame() {
    resetGame();
  }
  // Initial draw
  resetGame();
  </script>
</body>
</html> 